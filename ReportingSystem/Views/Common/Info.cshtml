@using ReportingSystem.Properties;

<head>
    <title>123</title>
</head>

<script src="https://cdn.jsdelivr.net/npm/vue@2.7.8/dist/vue.js"></script>
<script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>
<link rel="stylesheet" href="~/css/Info.css" asp-append-version="true" />

<div mt-3 class="text-center">
    <h2 class="display-4">Особистий кабінет</h2>
</div>

<div class="container" id="Info">
    @*---------------------------------------------------------------------------------------------------------------------*@
    @* Модальне вікно*@
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">{{modalTitle}}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрити"></button>
                </div>
                <div class="modal-body">

                    <p :class="{ 'red-text': modalEmployeeActive }">{{ modalOperation }}</p>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" v-on:click="Init()">Закрити</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" v-if="modalType == 2" v-on:click="EditEmployeeInfo()">Підтвердити</button>
                </div>
            </div>
        </div>
    </div>
    @*---------------------------------------------------------------------------------------------------------------------*@

    <div class="panel panel-default" v-if="personalInfo.id">
        <div class="panel-heading"></div>
        <div class="panel-body">
            <form v-bind:class="{editable: mode == 'edit'}">
                <div class="row align-items-center" v-if="rol == 'Developer' || rol == 'DevAdministrator'">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Ім'я</label>
                            <input type="text" class="form-control" v-bind:disabled="mode != 'edit'" v-model="personalInfo.firstName" />
                        </div>
                        <div class="form-group">
                            <label class="control-label">Прізвище</label>
                            <input type="text" class="form-control" v-bind:disabled="mode != 'edit'" v-model="personalInfo.secondName" />
                        </div>
                        <div class="form-group">
                            <label class="control-label">По-батькові</label>
                            <input type="text" class="form-control" v-bind:disabled="mode != 'edit'" v-model="personalInfo.thirdName" />
                        </div>
                    </div>
                    <div class="col-sm-6 text-center" style="display: flex; justify-content: center; align-items: center;">
                        <div class="clearfix">
                            <input type="file" id="imageInput" style="display: none;" accept="image/*" v-on:change="handleImageChange" v-bind:disabled="mode=='standart'">
                            <label for="imageInput">
                                <img :src="personalInfo.photo" alt="Right image" style="width: 200px; height: 150px; object-fit: contain; cursor: pointer;">
                            </label>
                        </div>
                    </div>
                </div>
                <div class="row align-items-center" v-else>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Ім'я</label>
                            <input type="text" class="form-control" v-bind:disabled="true" v-model="personalInfo.firstName" />
                        </div>
                        <div class="form-group">
                            <label class="control-label">Прізвище</label>
                            <input type="text" class="form-control" v-bind:disabled="true" v-model="personalInfo.secondName" />
                        </div>
                        <div class="form-group">
                            <label class="control-label">По-батькові</label>
                            <input type="text" class="form-control" v-bind:disabled="true" v-model="personalInfo.thirdName" />
                        </div>
                    </div>
                    <div class="col-sm-6 text-center" style="display: flex; justify-content: center; align-items: center;">
                        <div class="clearfix">
                            <input type="file" id="imageInput" style="display: none;" accept="image/*" v-on:change="handleImageChange" v-bind:disabled="mode=='standart'">
                            <label for="imageInput">
                                <img :src="personalInfo.photo" alt="Right image" style="width: 200px; height: 150px; object-fit: contain; cursor: pointer;">
                            </label>
                        </div>
                    </div>
                </div>

                <div class="row align-items-center" v-if="rol != 'Developer'">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Посада</label>
                            <input type="text" class="form-control" v-bind:disabled="true" v-model="personalInfo.position.namePosition" />
                        </div>
                        <div class="form-group">
                            <label class="control-label">Роль</label>
                            <input type="text" class="form-control" v-bind:disabled="true" v-model="personalInfo.rol.rolName" />
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Телефон</label>
                            <input type="text" class="form-control" v-bind:disabled="true" v-model="personalInfo.phoneWork" />
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Телефон особистий</label>
                            <input type="text" class="form-control" v-bind:disabled="mode=='standart'" v-model="personalInfo.phoneSelf" />
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Email</label>
                            <input type="text" class="form-control" v-bind:disabled="true" v-model="personalInfo.emailWork" />
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Email ос.</label>
                            <input type="text" class="form-control" v-bind:disabled="mode=='standart'" v-model="personalInfo.emailSelf" />
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Логін</label>
                            <input type="text" class="form-control" v-bind:disabled="mode=='standart'" v-model="personalInfo.login" />
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Пароль</label>
                            <input type="text" class="form-control" v-bind:disabled="mode=='standart'" v-model="personalInfo.password" />
                        </div>
                    </div>
                </div>

                <div class="row" v-if="rol != 'Developer'">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">ІПН</label>
                            <input type="text" class="form-control" v-bind:disabled="true" v-model="personalInfo.taxNumber" />
                        </div>
                    </div>
                </div>

                <div class="row" v-if="rol != 'Developer'">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Адреса реєстрації</label>
                            <input type="text" class="form-control" v-bind:disabled="true" v-model="personalInfo.addressReg" />
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Адреса фактична</label>
                            <input type="text" class="form-control" v-bind:disabled="mode=='standart'" v-model="personalInfo.addressFact" />
                        </div>
                    </div>
                </div>

                <div class="row" v-if="rol != 'Developer'">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Дата народження</label>
                            <input type="date" class="form-control" v-bind:disabled="true" v-model="personalInfo.birthDate" />
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Дата початку роботи</label>
                            <input type="date" class="form-control" v-bind:disabled="true" v-model="personalInfo.workStartDate" />
                        </div>
                    </div>
                </div>

                <div class="row" v-if="rol != 'Developer'">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Заробітна плата</label>
                            <input type="text" class="form-control" v-bind:disabled="true" v-model="personalInfo.salary" />
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Премія</label>
                            <input type="text" class="form-control" v-model="personalInfo.addSalary" v-bind:disabled="true" />
                        </div>
                    </div>
                </div>

                <div class="row" v-if="rol != 'Developer'">
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label class="control-label">Відпустка</label>
                            <input type="text" class="form-control" v-model="holidayDays" v-bind:disabled="true" />
                        </div>
                    </div>

                    <div class="col-sm-3">
                        <div class="form-group">
                            <label class="control-label">Лікарняні</label>
                            <input type="text" class="form-control" v-model="hospitalDays" v-bind:disabled="true" />
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label class="control-label">Відрядження</label>
                            <input type="text" class="form-control" v-model="assignmentDays" v-bind:disabled="true" />
                        </div>
                    </div>

                    <div class="col-sm-3">
                        <div class="form-group">
                            <label class="control-label">Відгули</label>
                            <input type="text" class="form-control" v-model="taketimeoffDays" v-bind:disabled="true" />
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="panel-footer">
            <div class="row">
                <div class="col-sm-12">
                    <div class="pull-right">
                        <button class="btn btn-default mt-3"
                                v-if="mode=='standart'"
                                v-bind:class="{active: mode == 'standart'}"
                                v-on:click="ToogleMode('edit')">
                            Редагувати
                        </button>

                        <button class="btn btn-default mt-3"
                                data-bs-toggle="modal" data-bs-target="#staticBackdrop"
                                v-if="mode=='edit'"
                                v-bind:class="{active: mode == 'edit'}"
                                v-on:click="ToogleMode('standart')">
                            Підтвердити
                        </button>

                        <button class="btn btn-danger mt-3"
                                v-if="mode=='edit'"
                                v-bind:class="{active: mode == 'edit'}"
                                v-on:click="mode='standart'">
                            Відмінити
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div v-else>
        <div style="margin-top: 50px; margin-bottom: 50px;">
            <div class="text-center">
                <div class="spinner-border" style="width: 3rem; height: 3rem;" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="~/js/Info.js" asp-append-version="true"></script>
