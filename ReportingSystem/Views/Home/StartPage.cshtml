@inject IViewLocalizer Localizer

@{
    ViewData["Title"] = @Localizer["StartPage"];
}
@* <p class="text-center textcolor customfont">
    @Localizer["ReportingSystem"]
</p> *@


<div class="container bg-transparent">

    <div class="row">
        <div class="col-lg-6">

        </div>
        <div class="col-lg">
            <div id="calendar-container">
                <div id="calendar" class="textcolor "></div>
            </div>
        </div>
        
    </div>

    <div class="row">
        <div class="col-lg-8">
        </div>
        <div class="col-lg">
            <div id="currency-app" class="textcolor ">
                <p>Currency Exchange Rates</p>
                <table>
                    <thead>
                        <tr>
                            <th>Currency</th>
                            <th>Rate</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="rate in filteredExchangeRates" :key="rate.cc">
                            <td>{{ rate.txt }}</td>
                            <td>{{ rate.rate }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>



<link href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' rel='stylesheet'>
<link href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css' rel='stylesheet'>
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
@* <script src='fullcalendar/dist/index.global.js'></script> *@
<script src="https://cdn.jsdelivr.net/npm/vue@2.7.8/dist/vue.js"></script>
@* <script src="https://unpkg.com/vue@2.6.14/dist/vue.js"></script> *@

<script>

    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            // themeSystem: 'bootstrap5',
            initialView: 'dayGridMonth',
            locale: '@ViewBag.CookieValue',
            height: 'auto',
            buttonText: {
                today: '@Localizer["Today"]', // Custom text for 'Today' button
                // month: 'Month',
                // week: 'Week'
            }
            // headerToolbar: {
            //     left: 'prev,next today',
            //     center: 'title',
            //     right: 'dayGridMonth,timeGridWeek,timeGridDay'
            // }
            // height: 650

            // calendar.setOption('height', 700);
        });
        calendar.render();
    });

</script>
<script>
    new Vue({
        el: '#currency-app',
        data: {
            exchangeRates: [],
        },
        computed: {
            filteredExchangeRates() {
                return this.exchangeRates.filter(rate => rate.cc === 'USD' || rate.cc === 'EUR');
            }
        },
        mounted() {
            this.fetchExchangeRates();
        },
        methods: {
            async fetchExchangeRates() {
                try {
                    const response = await fetch('https://bank.gov.ua/NBUStatService/v1/statdirectory/exchange?json');
                    const data = await response.json();
                    this.exchangeRates = data;
                    // console.log(this.exchangeRates)
                } catch (error) {
                    console.error('Error fetching exchange rates:', error);
                }
            }
        }
    });
</script>

<style>
    .container {
        display: grid;
        grid-template-rows: auto auto; 
        grid-row-gap: 20px; 
    }

    .row {
        display: flex;
        flex-direction: row;
    }
    table {
        width: 30%; /* Set the table width to 100% of its container */
        border-collapse: collapse; /* Collapse borders to avoid double borders */
    }

    th, td {
        padding: 12px; /* Increase padding for cells */
        text-align: left; /* Align text to the left */
        border: 1px solid #ddd; /* Add border to cells */
    }

    .textcolor {
        color: white
    }

    .customfont {
        font-size: 24px;
    }

    #calendar-container {
        /* position: absolute; */
        /* top: 100px; 
        right: 20px;
        width: 60%;
        height: 60%; */
        /* max-width: 500px;  */
        /* max-height: 100px; */
        /* display: grid; */
        place-items: right;
    }

    #calendar {
       
        width: 100%;
        height: 100%;
    }

    .fc-daygrid-day-number {
        color: white; /* Change to any color you want */
    }

    .fc-col-header-cell-cushion {
        color: black; /* Change to any color you want */
    }

        .fc-col-header-cell-cushion:hover {
            color: dimgrey;
        }

    .fc-daygrid-day:hover .fc-daygrid-day-number {
        color: black; /* Color when hovered */
        background-color: white;
    }

    .fc .fc-daygrid-day.fc-day-today {
        background-color: grey;
        opacity: 0.8;
    }

    .fc-day-today {
        background-color: yellow; /* Change to any color you want */
    }

    /* .fc .fc-today-button {
            background-color:green;
        } */

    .fc .fc-button-primary {
        background-color: grey;
        border-color: white;
        color: black;
    }

        .fc .fc-button-primary:disabled {
            background-color: grey;
            border-color: white;
            opacity: 1;
            color: black;
        }
</style>





@* @section StartPageContent {
    <body class="start-page">
    <p class="text-center textcolor customfont">
        @Localizer["ReportingSystem"]
    </p>
    </body>
    <style>
        .textcolor {
            color: white
        }

        .customfont {
            font-size: 24px;
        }
    </style>
} *@